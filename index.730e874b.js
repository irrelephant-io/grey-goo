let t=()=>{};function i(t,i){let e=t.indexOf(i);if(-1!=e)return t.splice(e,1),!0}let e,s,h={};function n(t,...i){(h[t]||[]).map((t=>t(...i)))}let r={get:(i,e)=>"_proxy"==e||t};function a(){return s}function c(t,{contextless:i=!1}={}){if(e=document.getElementById(t)||t||document.querySelector("canvas"),i&&(e=e||new Proxy({},r)),!e)throw Error("You must provide a canvas element for the game");return s=e.getContext("2d")||new Proxy({},r),s.imageSmoothingEnabled=!1,n("init"),{canvas:e,context:s}}function o(t,i){let e=Math.sin(i),s=Math.cos(i);return{x:t.x*s-t.y*e,y:t.x*e+t.y*s}}function l(t,i,e){return Math.min(Math.max(t,e),i)}class d{add(t){return new d(this.x+t.x,this.y+t.y,this)}subtract(t){return new d(this.x-t.x,this.y-t.y,this)}scale(t){return new d(this.x*t,this.y*t)}normalize(t=this.length()){return new d(this.x/t,this.y/t)}dot(t){return this.x*t.x+this.y*t.y}length(){return Math.hypot(this.x,this.y)}distance(t){return Math.hypot(this.x-t.x,this.y-t.y)}angle(t){return Math.acos(this.dot(t)/(this.length()*t.length()))}clamp(t,i,e,s){this._c=!0,this._a=t,this._b=i,this._d=e,this._e=s}get x(){return this._x}get y(){return this._y}set x(t){this._x=this._c?l(this._a,this._d,t):t}set y(t){this._y=this._c?l(this._b,this._e,t):t}constructor(t=0,i=0,e={}){this.x=t,this.y=i,e._c&&(this.clamp(e._a,e._b,e._d,e._e),this.x=t,this.y=i)}}function u(){return new d(...arguments)}class _ extends class{init(t={}){this.position=u(),this.velocity=u(),this.acceleration=u(),this.ttl=1/0,Object.assign(this,t)}update(t){this.advance(t)}advance(t){let i=this.acceleration;t&&(i=i.scale(t)),this.velocity=this.velocity.add(i);let e=this.velocity;t&&(e=e.scale(t)),this.position=this.position.add(e),this._pc(),this.ttl--}get dx(){return this.velocity.x}get dy(){return this.velocity.y}set dx(t){this.velocity.x=t}set dy(t){this.velocity.y=t}get ddx(){return this.acceleration.x}get ddy(){return this.acceleration.y}set ddx(t){this.acceleration.x=t}set ddy(t){this.acceleration.y=t}isAlive(){return this.ttl>0}_pc(){}constructor(t){return this.init(t)}}{init({width:t=0,height:i=0,context:e=a(),render:s=this.draw,update:h=this.advance,children:n=[],anchor:r={x:0,y:0},opacity:c=1,rotation:o=0,scaleX:l=1,scaleY:d=1,...u}={}){this._c=[],super.init({width:t,height:i,context:e,anchor:r,opacity:c,rotation:o,scaleX:l,scaleY:d,...u}),this._di=!0,this._uw(),this.addChild(n),this._rf=s,this._uf=h}update(t){this._uf(t),this.children.map((i=>i.update&&i.update(t)))}render(){let t=this.context;t.save(),(this.x||this.y)&&t.translate(this.x,this.y),this.rotation&&t.rotate(this.rotation),1==this.scaleX&&1==this.scaleY||t.scale(this.scaleX,this.scaleY);let i=-this.width*this.anchor.x,e=-this.height*this.anchor.y;(i||e)&&t.translate(i,e),this.context.globalAlpha=this.opacity,this._rf(),(i||e)&&t.translate(-i,-e),this.children.map((t=>t.render&&t.render())),t.restore()}draw(){}_pc(){this._uw(),this.children.map((t=>t._pc()))}get x(){return this.position.x}get y(){return this.position.y}set x(t){this.position.x=t,this._pc()}set y(t){this.position.y=t,this._pc()}get width(){return this._w}set width(t){this._w=t,this._pc()}get height(){return this._h}set height(t){this._h=t,this._pc()}_uw(){if(!this._di)return;let{_wx:t=0,_wy:i=0,_wo:e=1,_wr:s=0,_wsx:h=1,_wsy:n=1}=this.parent||{};this._wx=this.x,this._wy=this.y,this._ww=this.width,this._wh=this.height,this._wo=e*this.opacity,this._wsx=h*this.scaleX,this._wsy=n*this.scaleY,this._wx=this._wx*h,this._wy=this._wy*n,this._ww=this.width*this._wsx,this._wh=this.height*this._wsy,this._wr=s+this.rotation;let{x:r,y:a}=o({x:this._wx,y:this._wy},s);this._wx=r,this._wy=a,this._wx+=t,this._wy+=i}get world(){return{x:this._wx,y:this._wy,width:this._ww,height:this._wh,opacity:this._wo,rotation:this._wr,scaleX:this._wsx,scaleY:this._wsy}}set children(t){this.removeChild(this._c),this.addChild(t)}get children(){return this._c}addChild(...i){i.flat().map((i=>{this.children.push(i),i.parent=this,i._pc=i._pc||t,i._pc()}))}removeChild(...t){t.flat().map((t=>{i(this.children,t)&&(t.parent=null,t._pc())}))}get opacity(){return this._opa}set opacity(t){this._opa=t,this._pc()}get rotation(){return this._rot}set rotation(t){this._rot=t,this._pc()}setScale(t,i=t){this.scaleX=t,this.scaleY=i}get scaleX(){return this._scx}set scaleX(t){this._scx=t,this._pc()}get scaleY(){return this._scy}set scaleY(t){this._scy=t,this._pc()}}class w extends _{init({image:t,width:i=(t?t.width:void 0),height:e=(t?t.height:void 0),...s}={}){super.init({image:t,width:i,height:e,...s})}get animations(){return this._a}set animations(t){let i,e;for(i in this._a={},t)this._a[i]=t[i].clone(),e=e||this._a[i];this.currentAnimation=e,this.width=this.width||e.width,this.height=this.height||e.height}playAnimation(t){this.currentAnimation=this.animations[t],this.currentAnimation.loop||this.currentAnimation.reset()}advance(t){super.advance(t),this.currentAnimation&&this.currentAnimation.update(t)}draw(){this.image&&this.context.drawImage(this.image,0,0,this.image.width,this.image.height),this.currentAnimation&&this.currentAnimation.render({x:0,y:0,width:this.width,height:this.height,context:this.context}),this.color&&(this.context.fillStyle=this.color,this.context.fillRect(0,0,this.width,this.height))}}new WeakMap;function x(t){let i=t.canvas;t.clearRect(0,0,i.width,i.height)}function y({fps:i=60,clearCanvas:e=!0,update:s=t,render:h,context:r=a(),blur:c=!1}={}){if(!h)throw Error("You must provide a render() function");let o,l,d,u,_,w=0,y=1e3/i,p=1/i,g=e?x:t,m=!0;function f(){if(l=requestAnimationFrame(f),m&&(d=performance.now(),u=d-o,o=d,!(u>1e3))){for(n("tick"),w+=u;w>=y;)_.update(p),w-=y;g(r),_.render()}}return c||(window.addEventListener("focus",(()=>{m=!0})),window.addEventListener("blur",(()=>{m=!1}))),_={update:s,render:h,isStopped:!0,start(){o=performance.now(),this.isStopped=!1,requestAnimationFrame(f)},stop(){this.isStopped=!0,cancelAnimationFrame(l)},_frame:f,set _last(t){o=t}},_}const p=t=>{t.width=window.innerWidth,t.height=window.innerHeight};const g={colorBgDark:"#293133",colorBgLight:"#526166",colorFgLight:"#ccf3ff",colorFgMedium:"#a3c2cc",colorFgDark:"#7a9299"};class m extends w{draw(){if(super.draw(),this.context.beginPath(),this.context.arc(this.x,this.y,this.radius,0,2*Math.PI),this.context.fillStyle=g.colorFgDark,this.context.fill(),this.context.stroke(),void 0!==this.celestialName){const t=32,i=this.y+this.radius+2*t;this.context.fillStyle=g.colorFgLight,this.context.textAlign="center",this.context.font=`${t}px Arial`,this.context.fillText(this.celestialName,this.x,i)}}constructor(t){var i,e,s;super(t),s=100,(e="radius")in(i=this)?Object.defineProperty(i,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[e]=s,this.radius=t.radius,this.celestialName=t.celestialName}}const f=t=>new m(t);let{canvas:v}=c();var A;p(A=v),window.addEventListener("resize",(()=>{p(A)}));const b=[f({celestialName:"Earth",radius:100,x:500,y:500}),f({celestialName:"Jupiter",radius:200,x:100,y:100}),f({celestialName:"Mars",radius:80,x:300,y:350})];y({update:()=>{b.forEach((t=>t.update()))},render:()=>{b.forEach((t=>t.render()))}}).start();
//# sourceMappingURL=index.730e874b.js.map
